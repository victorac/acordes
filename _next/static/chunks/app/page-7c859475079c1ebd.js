(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{393:(e,t,n)=>{Promise.resolve().then(n.bind(n,7315))},7315:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>k});var s=n(7437);let l=e=>{let{keyName:t,editMode:n,onEditModeChange:l,keyChangeMode:i,onKeyChangeModeChange:a,onKeyChange:r}=e;return(0,s.jsxs)("div",{className:"max-w-7xl flex items-center justify-between gap-[1px] w-full px-4 pb-4 text-[14px] leading-5",children:[n&&!i&&(0,s.jsx)("button",{className:"w-fit py-[6px] px-3 rounded-[100px] ring-1 ring-[#E6FF81] bg-[#3C3F2F] text-[#E6FF81]",onClick:a,children:"Change key"}),n&&i&&(0,s.jsx)("button",{className:"w-[30px] h-[30px] p-[6px] shrink-0 flex items-center justify-center rounded-[100px] ring-1 ring-[#E6FF81] bg-[#3C3F2F] text-[#E6FF81]",onClick:a,children:(0,s.jsx)("img",{src:"/CloseNoteContainer.svg",alt:"Close"})}),i&&(0,s.jsxs)("div",{className:"min-w-0 flex-shrink w-full relative",children:[(0,s.jsx)("div",{className:"pointer-events-none absolute w-[33px] h-full left-0 top-0 bg-gradient-to-r from-[#101013]"}),(0,s.jsxs)("div",{className:"flex overflow-x-auto font-medium",children:[(0,s.jsx)("div",{className:"\n                min-w-[56px] h-[32px] rounded-[24px] p-[6px] flex items-center justify-center \n                bg-[#1D1F2C] text-[#B3BDC7] \n                select-none",children:"Key"}),["C","C#-Db","D","D#-Eb","E","F","F#-Gb","G","G#-Ab","A","A#-Bb","B"].map((e,n)=>(0,s.jsx)("button",{className:"\n                  font-medium\n                  min-w-[56px] h-[32px] rounded-[24px] p-[6px] flex items-center justify-center gap-[2px] \n                  ".concat(t===e?"bg-[#E6FF81] text-[#1D1F2C]":"bg-[#1D1F2C] text-[#B3BDC7]","  \n                  select-none\n                "),onClick:()=>r(e),children:e.includes("-")?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{children:e.split("-")[0]}),(0,s.jsx)("div",{className:"rounded-full h-1 w-1 \n                    ".concat(t===e?"bg-[#1D1F2C]":"bg-[#B3BDC7]"," \n                    ")}),(0,s.jsx)("div",{children:e.split("-")[1]})]}):e},n))]}),(0,s.jsx)("div",{className:"pointer-events-none absolute w-[33px] h-full right-0 top-0 bg-gradient-to-r from-transparent to-[#101013]"})]}),(0,s.jsxs)("button",{className:"min-w-fit flex-shrink flex items-center gap-1 w-fit h-8 py-[6px] px-3 rounded-[100px] bg-[#1D1F2C] text-[#B3BDC7] ml-auto select-none",onClick:l,children:[n&&(0,s.jsx)("img",{src:"/CloseNoteContainerWhite.svg",alt:"Close"}),"Edit mode"]})]})};var i=n(2265);let a=()=>(0,s.jsxs)("nav",{className:"flex items-center justify-between w-full h-[38px] sm:h-auto pt-2 px-4 text-[#B3BDC7] text-[11px] leading-3",children:[(0,s.jsx)("h1",{className:"px-4",children:"Acorde"}),(0,s.jsx)("a",{className:"px-4 py-2",href:"./settings",children:"Settings"})]});var r=n(5149);let o=()=>{let[e,t]=(0,i.useState)(!1);return(0,i.useEffect)(()=>{{t(window.innerWidth<=640);let e=()=>{t(window.innerWidth<=640)};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)}},[]),e};var c=n(5565);let x=["C","C#-Db","D","D#-Eb","E","F","F#-Gb","G","G#-Ab","A","A#-Bb","B"],d={0:"R",1:"m2",2:"2",3:"m3",4:"3",5:"P4",6:"Aug4",7:"5",8:"m6",9:"6",10:"7",11:"M7"};function u(e,t,n){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"E",l=n[e],i=(x.findIndex(e=>e===l)+t)%x.length;return{interval:d[(i-x.findIndex(e=>e===s)+x.length)%x.length],noteName:x[i]}}var f=n(4446),m=n(8606);let p={initial:{opacity:0},animate:{opacity:1},exit:{opacity:0}},h=e=>{let{interval:t,editMode:n,stringNum:l,isScrolledDown:a,isScrolledUp:r,onNutClick:o}=e,[c,x]=(0,i.useState)(!1);(0,i.useEffect)(()=>{if(c){let e=setTimeout(()=>{x(!1)},1e3);return()=>clearTimeout(e)}},[c]);let d=(0,s.jsx)(f.M,{mode:"wait",children:t?(0,s.jsx)(m.E.img,{src:"remove_nut.svg",alt:"remove nut",initial:"initial",animate:"animate",exit:"exit",variants:p,transition:{duration:.2,ease:"easeInOut"},layout:!0},"remove"):(0,s.jsx)(m.E.img,{src:"add_nut.svg",alt:"add nut",initial:"initial",animate:"animate",exit:"exit",variants:p,transition:{duration:.2,ease:"easeInOut"},layout:!0},"add")});if(c&&(d=(0,s.jsx)(f.M,{mode:"wait",children:(0,s.jsx)(m.E.img,{src:"selected_nut.svg",alt:"selected nut",initial:"initial",animate:"animate",exit:"exit",variants:p,transition:{duration:.2,ease:"easeInOut"},layout:!0},"selected")})),n)return(0,s.jsx)("button",{onClick:function(){t||x(!0),o(l)},className:"flex items-center justify-center w-[49px] h-[28px] sm:h-[49px] sm:w-[28px] p-1 text-[#D0D8FF] text-[16px] leading-5 font-semibold",children:(0,s.jsx)("div",{className:" p-[6px] flex items-center justify-center",children:(0,s.jsx)("div",{className:"w-[20px] h-[20px] rounded-full bg-[#192149] hover:bg-[#212C60] flex items-center justify-center",children:d})})});let u=a&&!r;return(0,s.jsx)(m.E.div,{className:"\n      flex items-center justify-center\n      w-[49px]\n      sm:h-[49px] \n      ".concat(u?"sm:w-fit":"sm:w-[28px]","\n      p-1\n      text-[#D0D8FF] \n      text-[16px] \n      leading-5 \n      font-semibold    \n      "),layout:!0,children:u&&t?(0,s.jsx)("div",{className:"rounded-full h-1 w-1 bg-[#B3BDC7]"}):t})},g=e=>{let{id:t,className:n,children:l}=e,{isOver:i,setNodeRef:a}=(0,r.Zj)({id:t});return(0,s.jsx)("div",{className:n,ref:a,style:{color:i?"green":void 0},children:l})},v=e=>{let{id:t,children:n,string:l,fretNumber:i,noteState:a,editMode:r,onAddNote:o}=e;return(0,s.jsxs)(g,{id:t,className:"\n      w-[49px] \n      h-[159px] \n      sm:w-[159px] \n      sm:h-[49px] \n      flex \n      items-center \n      justify-center \n      relative\n      before:absolute\n      before:content-['']\n      before:h-full\n      ".concat(a?"before:bg-[#E3EFF1]":"before:bg-[#3E4648]","\n      before:left-1/2\n      before:-translate-x-1/2\n      sm:before:w-full\n      sm:before:top-1/2\n      sm:before:-translate-y-1/2\n      sm:before:left-0\n      sm:before:translate-x-0\n      ").concat({1:"before:w-[1px] sm:before:h-[1px]",2:"before:w-[2px] sm:before:h-[2px]",3:"before:w-[3px] sm:before:h-[3px]",4:"before:w-[4px] sm:before:h-[4px]",5:"before:w-[5px] sm:before:h-[5px]",6:"before:w-[6px] sm:before:h-[6px]"}[l],"\n      "),children:[n,!a&&r&&(0,s.jsx)("button",{onClick:()=>o(l,i),className:"w-6 h-8 rounded-full bg-[#3E4648] px-1 py-2 flex items-center justify-center z-10 text-[#E3EFF1] select-none",children:"+"})]})},b=e=>{var t,n;let{children:l,state:a,editMode:o,className:c,id:x}=e,{attributes:d,listeners:u,setNodeRef:f,transform:p}=(0,r.O1)({id:x}),h=(0,i.useRef)(null),g=o?{}:{drag:!0,dragConstraints:h},v=p?{transform:"translate3d(".concat(p.x,"px, ").concat(p.y,"px, 0)"),zIndex:3e3}:{zIndex:1e3},b={type:"spring"};return"dragging"===a.status&&(b={type:"tween",ease:"easeOut",duration:.1,delay:-.01}),(0,s.jsxs)(s.Fragment,{children:[!o&&(0,s.jsx)(m.E.div,{className:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 w-[44px] h-[72px] sm:w-[72px] sm:h-[44px] the-container",ref:h}),(0,s.jsx)(m.E.div,{className:"touch-none ".concat(c),ref:f,style:{zIndex:v.zIndex},...u,...d,initial:a.initialPosition,animate:{x:null!==(t=null==p?void 0:p.x)&&void 0!==t?t:0,y:null!==(n=null==p?void 0:p.y)&&void 0!==n?n:0},transition:b,...g,children:l})]})},j=e=>{let{id:t,interval:n,noteName:l,state:i,editMode:a}=e;return(0,s.jsx)(b,{id:t,className:"w-[44px] h-[72px] sm:w-[72px] sm:h-[44px] flex relative",state:i,editMode:a,children:(0,s.jsxs)("div",{id:t,className:"\n        select-none\n        w-full h-full rounded-[200px] p-1\n        flex flex-col items-center justify-center\n        ".concat("R"===n?"bg-[#E6FF81]":"bg-[#E3EFF1]","\n        ").concat((i.status,""),"\n      "),children:[(0,s.jsx)("div",{className:"text-[#141935] text-[24px] font-semibold leading-7",children:n}),(0,s.jsx)("div",{className:"text-[#535B86] flex flex-col sm:flex-row sm:gap-[2px] justify-center items-center text-[14px] font-semibold leading-4",children:l.includes("-")?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{children:l.split("-")[0]}),(0,s.jsx)("div",{className:"hidden sm:block rounded-full h-1 w-1 bg-[#535B86]"}),(0,s.jsx)("div",{children:l.split("-")[1]})]}):l})]})})},y={initial:{opacity:0},animate:{opacity:1},exit:{opacity:0}},w=e=>{let{onClick:t}=e;return(0,s.jsx)(m.E.button,{initial:"initial",animate:"animate",exit:"exit",variants:y,transition:{duration:.2,ease:"easeInOut"},layout:!0,className:"absolute top-8 -left-2 sm:-top-2 sm:left-8 w-8 h-8 flex items-center justify-center z-[1000]",onClick:t,children:(0,s.jsx)("div",{className:"w-5 h-5 rounded-full bg-[#1D1F2C] ring-[1px] ring-[#79747E] flex items-center justify-center",children:(0,s.jsx)("img",{src:"/remove_nut.svg",alt:"close"})})},"remove")},N=e=>{let{keyName:t,neckIntervals:n,tunning:l,strings:i,editMode:a,isScrolledDown:r,isScrolledUp:o,onNutClick:c}=e;return(0,s.jsx)(m.E.div,{className:" bg-[#192149]  rounded-full px-4 sm:px-0 sm:py-4 w-[326px] sm:w-[28px] h-[28px] sm:h-[326px] flex sm:flex-col items-center  justify-center sticky top-0 sm:top-auto sm:left-0 z-[2000] ",layout:!0,transition:{duration:.3,ease:"easeInOut"},children:i.map((e,i)=>{let{interval:x}=u(e,0,l,t);return n["".concat(e,"-0")]||(x=""),(0,s.jsx)(h,{interval:x,stringNum:e,onNutClick:c,editMode:a,isScrolledDown:r,isScrolledUp:o},i)})})},C=e=>{let{keyName:t,neckIntervals:n,tunning:l,fretNumber:a,index:r,strings:o,editMode:c,onAddNote:x,onRemoveNote:d}=e,m="fret-".concat(a,"-").concat(r),[p,h]=function(){let e=(0,i.useRef)(null),[t,n]=(0,i.useState)(!1);return(0,i.useEffect)(()=>{let t=new IntersectionObserver(e=>{let[t]=e;n(t.isIntersecting)},{threshold:.1}),s=e.current;return s&&t.observe(s),()=>{s&&t.unobserve(s)}},[]),[e,t]}(),g=!1;for(let e=0;e<o.length;e++){var b;if((null===(b=n["".concat(o[e],"-").concat(a)])||void 0===b?void 0:b.status)==="dragging"){g=!0;break}}return(0,s.jsxs)("div",{id:m,ref:p,className:"flex sm:flex-col relative  h-[159px]  w-[calc(49px*6)] sm:w-[159px]  sm:h-[calc(49px*6)] ",children:[(h||g)&&o.map(e=>{var i;return(0,s.jsx)(v,{id:"cell-".concat(e,"-").concat(a,"-").concat(r),fretNumber:a,string:e,noteState:null===(i=n["".concat(e,"-").concat(a)])||void 0===i?void 0:i.status,editMode:c,onAddNote:x,children:(()=>{let i=n["".concat(e,"-").concat(a)];if(!i)return null;let{interval:o,noteName:x}=u(e,a,l,t),m="note-".concat(e,"-").concat(a,"-").concat(r);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(j,{id:m,interval:o,noteName:x,state:i,stringNumber:e,fretNumber:a,editMode:c},m),(0,s.jsx)(f.M,{mode:"wait",children:c&&"dragging"!==i.status&&(0,s.jsx)(w,{onClick:function(){d(e,a)}},"".concat(m,"-close"))})]})})()},"".concat(e,"-").concat(a,"-").concat(r))}),h&&(0,s.jsx)("div",{className:"absolute top-0 left-0 w-fit text-[#B3BDC7] text-xs",children:a})]})},E=e=>{let{enabled:t,children:n,handleDragStart:l,handleDragEnd:i,modifiers:a,sensors:o}=e;return t?(0,s.jsx)(r.LB,{onDragStart:l,onDragEnd:i,modifiers:a,sensors:o,children:n}):(0,s.jsx)(s.Fragment,{children:n})},F=e=>{let{keyName:t,neckIntervals:n,setNeckIntervals:l,tunning:a,editMode:x}=e,d=(0,r.VT)(r.we,{activationConstraint:{delay:30,tolerance:5}}),u=(0,r.Dy)(d),f=Array.from({length:72},(e,t)=>t%24+1),[m,p]=(0,i.useState)(!1),h=o(),g=(0,i.useRef)({x:0,y:0}),v=(0,i.useRef)({x:0,y:0}),b=(0,i.useRef)(null),[j,y]=(0,i.useState)(!1),[w,F]=(0,i.useState)(!1);(0,i.useEffect)(()=>{b.current&&b.current.scrollTo({left:v.current.x,top:v.current.y,behavior:"auto"})},[x]),(0,i.useLayoutEffect)(()=>{p(!0)},[]);let D=h?[6,5,4,3,2,1]:[1,2,3,4,5,6];function k(e,t){l(n=>{if(n["".concat(e,"-").concat(t)])return n;let s="".concat(e,"-").concat(t);return{...n,[s]:{status:"idle",initialPosition:{x:0,y:0}}}})}function B(e,t){l(n=>{let s={...n};return delete s["".concat(e,"-").concat(t)],s})}return m?(0,s.jsx)(E,{handleDragStart:function(e){let{active:t}=e,[,n,s]=t.id.split("-");l(e=>{let t="".concat(n,"-").concat(s);return{...e,[t]:{status:"dragging",initialPosition:{x:0,y:0}}}})},handleDragEnd:function(e){let{over:t}=e,[,s,i]=e.active.id.split("-");if(null==t?void 0:t.id){let[,a,r]=t.id.split("-");if(n["".concat(a,"-").concat(r)]){l(e=>({...e,["".concat(s,"-").concat(i)]:{status:"idle",initialPosition:{x:0,y:0}}}));return}let o=h?49:159,c=o/2,x=h?159:49,d=x/2,u=e.delta.x,f=e.delta.y,m=u>0?Math.floor((u+c)/o):Math.ceil((u-c)/o),p=f>0?Math.floor((f+d)/(x+8)):Math.ceil((f-d)/(x+8)),g={x:u-=m*o,y:f-=p*(x+8)};l(e=>{let t={...e};return delete t["".concat(s,"-").concat(i)],t["".concat(a,"-").concat(r)]={status:"idle",initialPosition:g},t})}else l(e=>({...e,["".concat(s,"-").concat(i)]:{status:"idle",initialPosition:{x:0,y:0}}}))},modifiers:[c.lv],sensors:u,enabled:x,children:(0,s.jsxs)("div",{ref:b,onScroll:function(e){let t=e.target;v.current={x:t.scrollLeft||0,y:t.scrollTop||0};let n=t.scrollTop-g.current.y,s=t.scrollLeft-g.current.x;n<0&&Math.abs(n)>100?(F(!0),y(!1),g.current.y=t.scrollTop):n>0&&Math.abs(n)>300&&(y(!0),F(!1),g.current.y=t.scrollTop),s<0&&Math.abs(s)>100?(F(!0),y(!1),g.current.x=t.scrollLeft):s>0&&Math.abs(s)>300&&(y(!0),F(!1),g.current.x=t.scrollLeft),h?t.scrollTop+t.clientHeight>=t.scrollHeight-159&&(t.scrollTop=t.scrollTop-3816-184):t.scrollLeft+t.clientWidth>=t.scrollWidth-159&&(t.scrollLeft=t.scrollLeft-3816-184)},className:" container mx-auto my-2 sm:my-0 flex flex-col items-center sm:flex-row h-full relative flex-1 overflow-y-auto sm:overflow-x-auto sm:overflow-y-hidden custom-scrollbar ",children:[(0,s.jsx)(N,{tunning:a,keyName:t,neckIntervals:n,strings:D,editMode:x,isScrolledDown:j,isScrolledUp:w,onNutClick:function(e){l(t=>{let n={...t},s="".concat(e,"-0");return n[s]?delete n[s]:n[s]={status:"idle",initialPosition:{x:0,y:0}},n})}}),(0,s.jsx)("div",{className:" flex flex-col items-center sm:flex-row sm:justify-start mt-[8px] sm:mt-0 sm:ml-[8px] gap-2 ",children:f.map((e,l)=>(0,s.jsx)(C,{fretNumber:e,index:l,keyName:t,tunning:a,strings:D,editMode:x,onAddNote:k,onRemoveNote:B,neckIntervals:n},"".concat(e,"-").concat(l)))})]})}):(0,s.jsx)("div",{className:"flex items-center justify-center w-full h-full",children:(0,s.jsx)("div",{className:"animate-pulse text-[#B3BDC7]",children:"Loading..."})})},D=[{1:"A",2:"E",3:"C",4:"G",5:"D",6:"A"},{1:"D",2:"A",3:"F",4:"C",5:"G",6:"D"},{1:"E",2:"B",3:"G",4:"D",5:"A",6:"E"}];function k(){let[e,t]=(0,i.useState)("E"),[n,r]=(0,i.useState)(!1),[o,c]=(0,i.useState)(!1),[u]=(0,i.useState)(["R","3","5"]),[f]=(0,i.useState)(D.at(-1)),[m,p]=(0,i.useState)({});return(0,i.useEffect)(()=>{p(function(e,t,n){let s={};for(let l=1;l<=6;l++){let i=x.findIndex(e=>e===n[Number(l)]);for(let n=0;n<=24;n++){let a=((i+n)%x.length-x.findIndex(e=>e===t)+x.length)%x.length;e.includes(d[a])&&(s["".concat(l,"-").concat(n)]={status:"idle",initialPosition:{x:0,y:0}})}}return s}(u,e,f))},[e,u,f]),(0,s.jsxs)("div",{className:"flex flex-col w-full h-dvh items-center bg-[#101013]",children:[(0,s.jsx)(a,{}),(0,s.jsx)(F,{keyName:e,neckIntervals:m,setNeckIntervals:p,tunning:f,editMode:n}),(0,s.jsx)(l,{keyName:e,editMode:n,keyChangeMode:o,onEditModeChange:function(){n&&c(!1),r(!n)},onKeyChangeModeChange:function(){c(!o)},onKeyChange:function(e){t(e)}})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[432,130,215,744],()=>t(393)),_N_E=e.O()}]);